import type { GoalOption, Roadmap, Phase } from "@/types/goal";

// Predefined goal options - NO free text garbage
export const goalOptions: GoalOption[] = [
  // Exams
  {
    id: "exam-dsa",
    name: "Data Structures & Algorithms",
    type: "exam",
    category: "Computer Science",
    estimatedHours: 120,
  },
  {
    id: "exam-system-design",
    name: "System Design Interview",
    type: "exam",
    category: "Computer Science",
    estimatedHours: 80,
  },
  {
    id: "exam-frontend",
    name: "Frontend Development Assessment",
    type: "exam",
    category: "Web Development",
    estimatedHours: 60,
  },
  {
    id: "exam-aws",
    name: "AWS Solutions Architect",
    type: "exam",
    category: "Cloud",
    estimatedHours: 100,
  },
  
  // Skills
  {
    id: "skill-react",
    name: "React & TypeScript",
    type: "skill",
    category: "Web Development",
    estimatedHours: 80,
  },
  {
    id: "skill-python",
    name: "Python Programming",
    type: "skill",
    category: "Programming",
    estimatedHours: 60,
  },
  {
    id: "skill-sql",
    name: "SQL & Database Design",
    type: "skill",
    category: "Data",
    estimatedHours: 40,
  },
  {
    id: "skill-ml",
    name: "Machine Learning Fundamentals",
    type: "skill",
    category: "AI/ML",
    estimatedHours: 100,
  },
  
  // Roles (mapped to skills internally)
  {
    id: "role-frontend",
    name: "Frontend Developer",
    type: "role",
    category: "Engineering",
    estimatedHours: 150,
    skillIds: ["skill-react", "exam-frontend"],
  },
  {
    id: "role-backend",
    name: "Backend Developer",
    type: "role",
    category: "Engineering",
    estimatedHours: 180,
    skillIds: ["skill-python", "skill-sql", "exam-system-design"],
  },
  {
    id: "role-fullstack",
    name: "Full Stack Developer",
    type: "role",
    category: "Engineering",
    estimatedHours: 250,
    skillIds: ["skill-react", "skill-python", "skill-sql"],
  },
];

// Generate a mock roadmap for DSA goal
export function generateMockRoadmap(goalId: string): Roadmap {
  const phases: Phase[] = [
    {
      id: "phase-1",
      name: "Foundations",
      description: "Core concepts you must master before moving forward",
      order: 1,
      estimatedMinutes: 720, // 12 hours
      topics: [
        {
          id: "topic-1-1",
          name: "Big O Notation",
          estimatedMinutes: 180,
          tasks: [
            {
              id: "task-1-1-1",
              name: "Understand Time Complexity",
              estimatedMinutes: 45,
              difficulty: "easy",
              dependencies: [],
              revisionWeight: 0.8,
              status: "scheduled",
              scheduleReason: "Foundation concept - must be solid before algorithms",
            },
            {
              id: "task-1-1-2",
              name: "Space Complexity Analysis",
              estimatedMinutes: 45,
              difficulty: "medium",
              dependencies: ["task-1-1-1"],
              revisionWeight: 0.7,
              status: "scheduled",
              scheduleReason: "Builds on time complexity understanding",
            },
            {
              id: "task-1-1-3",
              name: "Practice: Analyze 10 Functions",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-1-1-2"],
              revisionWeight: 0.5,
              status: "scheduled",
              scheduleReason: "Hands-on practice solidifies theory",
            },
            {
              id: "task-1-1-4",
              name: "Big O Quiz",
              estimatedMinutes: 30,
              difficulty: "easy",
              dependencies: ["task-1-1-3"],
              revisionWeight: 0.3,
              assessmentHook: "quiz-big-o",
              status: "scheduled",
              scheduleReason: "Verify understanding before moving on",
            },
          ],
        },
        {
          id: "topic-1-2",
          name: "Arrays & Strings",
          estimatedMinutes: 300,
          tasks: [
            {
              id: "task-1-2-1",
              name: "Array Operations Deep Dive",
              estimatedMinutes: 60,
              difficulty: "easy",
              dependencies: ["task-1-1-4"],
              revisionWeight: 0.6,
              status: "scheduled",
              scheduleReason: "Core data structure - foundation for everything",
            },
            {
              id: "task-1-2-2",
              name: "Two Pointer Technique",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-1-2-1"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "High-impact pattern used in 30% of problems",
            },
            {
              id: "task-1-2-3",
              name: "Sliding Window Pattern",
              estimatedMinutes: 90,
              difficulty: "medium",
              dependencies: ["task-1-2-2"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "Critical pattern - your weak area needs this",
            },
            {
              id: "task-1-2-4",
              name: "Practice: 5 Array Problems",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-1-2-3"],
              revisionWeight: 0.4,
              status: "scheduled",
              scheduleReason: "Apply patterns to real problems",
            },
          ],
        },
        {
          id: "topic-1-3",
          name: "Hash Tables",
          estimatedMinutes: 240,
          tasks: [
            {
              id: "task-1-3-1",
              name: "Hash Table Internals",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-1-2-4"],
              revisionWeight: 0.7,
              status: "scheduled",
              scheduleReason: "Understanding internals helps with optimization",
            },
            {
              id: "task-1-3-2",
              name: "Collision Resolution",
              estimatedMinutes: 45,
              difficulty: "medium",
              dependencies: ["task-1-3-1"],
              revisionWeight: 0.6,
              status: "scheduled",
              scheduleReason: "Common interview topic",
            },
            {
              id: "task-1-3-3",
              name: "Hash Map Patterns",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-1-3-2"],
              revisionWeight: 0.8,
              status: "scheduled",
              scheduleReason: "Frequency counting, grouping - used everywhere",
            },
            {
              id: "task-1-3-4",
              name: "Practice: Hash Table Problems",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-1-3-3"],
              revisionWeight: 0.4,
              status: "scheduled",
              scheduleReason: "Cement understanding with practice",
            },
          ],
        },
      ],
    },
    {
      id: "phase-2",
      name: "Core Data Structures",
      description: "Essential structures for solving complex problems",
      order: 2,
      estimatedMinutes: 900, // 15 hours
      topics: [
        {
          id: "topic-2-1",
          name: "Linked Lists",
          estimatedMinutes: 240,
          tasks: [
            {
              id: "task-2-1-1",
              name: "Singly Linked List Implementation",
              estimatedMinutes: 60,
              difficulty: "easy",
              dependencies: ["task-1-3-4"],
              revisionWeight: 0.6,
              status: "scheduled",
              scheduleReason: "Foundation for more complex structures",
            },
            {
              id: "task-2-1-2",
              name: "Doubly Linked List",
              estimatedMinutes: 45,
              difficulty: "medium",
              dependencies: ["task-2-1-1"],
              revisionWeight: 0.5,
              status: "scheduled",
              scheduleReason: "Used in LRU cache - common interview problem",
            },
            {
              id: "task-2-1-3",
              name: "Fast & Slow Pointers",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-2-1-2"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "Key technique for cycle detection",
            },
            {
              id: "task-2-1-4",
              name: "Practice: Linked List Problems",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-2-1-3"],
              revisionWeight: 0.4,
              status: "scheduled",
              scheduleReason: "Apply techniques to classic problems",
            },
          ],
        },
        {
          id: "topic-2-2",
          name: "Trees",
          estimatedMinutes: 360,
          tasks: [
            {
              id: "task-2-2-1",
              name: "Binary Tree Basics",
              estimatedMinutes: 45,
              difficulty: "easy",
              dependencies: ["task-2-1-4"],
              revisionWeight: 0.7,
              status: "scheduled",
              scheduleReason: "Foundation for all tree problems",
            },
            {
              id: "task-2-2-2",
              name: "Tree Traversals (DFS)",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-2-2-1"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "Core skill - used in 80% of tree problems",
            },
            {
              id: "task-2-2-3",
              name: "Tree Traversals (BFS)",
              estimatedMinutes: 45,
              difficulty: "medium",
              dependencies: ["task-2-2-2"],
              revisionWeight: 0.8,
              status: "scheduled",
              scheduleReason: "Level-order problems require this",
            },
            {
              id: "task-2-2-4",
              name: "Binary Search Trees",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-2-2-3"],
              revisionWeight: 0.8,
              status: "scheduled",
              scheduleReason: "BST property enables O(log n) operations",
            },
            {
              id: "task-2-2-5",
              name: "BST Operations (Insert/Delete)",
              estimatedMinutes: 60,
              difficulty: "hard",
              dependencies: ["task-2-2-4"],
              revisionWeight: 0.7,
              status: "scheduled",
              scheduleReason: "Deletion is tricky - needs focused practice",
            },
            {
              id: "task-2-2-6",
              name: "Practice: Tree Problems",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-2-2-5"],
              revisionWeight: 0.4,
              status: "scheduled",
              scheduleReason: "Solidify tree skills before graphs",
            },
          ],
        },
        {
          id: "topic-2-3",
          name: "Heaps",
          estimatedMinutes: 300,
          tasks: [
            {
              id: "task-2-3-1",
              name: "Heap Concept & Properties",
              estimatedMinutes: 45,
              difficulty: "medium",
              dependencies: ["task-2-2-6"],
              revisionWeight: 0.7,
              status: "scheduled",
              scheduleReason: "Foundation for priority queue problems",
            },
            {
              id: "task-2-3-2",
              name: "Heap Operations",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-2-3-1"],
              revisionWeight: 0.8,
              status: "scheduled",
              scheduleReason: "Insert, extract, heapify - core operations",
            },
            {
              id: "task-2-3-3",
              name: "Top K Pattern",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-2-3-2"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "Very common interview pattern",
            },
            {
              id: "task-2-3-4",
              name: "Two Heaps Pattern",
              estimatedMinutes: 60,
              difficulty: "hard",
              dependencies: ["task-2-3-3"],
              revisionWeight: 0.8,
              status: "scheduled",
              scheduleReason: "Median finding - advanced but asked often",
            },
            {
              id: "task-2-3-5",
              name: "Practice: Heap Problems",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-2-3-4"],
              revisionWeight: 0.4,
              status: "scheduled",
              scheduleReason: "Apply patterns before moving to graphs",
            },
          ],
        },
      ],
    },
    {
      id: "phase-3",
      name: "Advanced Algorithms",
      description: "Complex patterns that separate good from great",
      order: 3,
      estimatedMinutes: 1200, // 20 hours
      topics: [
        {
          id: "topic-3-1",
          name: "Graphs",
          estimatedMinutes: 480,
          tasks: [
            {
              id: "task-3-1-1",
              name: "Graph Representations",
              estimatedMinutes: 45,
              difficulty: "easy",
              dependencies: ["task-2-3-5"],
              revisionWeight: 0.6,
              status: "scheduled",
              scheduleReason: "Adjacency list vs matrix - know when to use each",
            },
            {
              id: "task-3-1-2",
              name: "BFS on Graphs",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-3-1-1"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "Shortest path in unweighted graphs",
            },
            {
              id: "task-3-1-3",
              name: "DFS on Graphs",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-3-1-2"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "Cycle detection, connected components",
            },
            {
              id: "task-3-1-4",
              name: "Topological Sort",
              estimatedMinutes: 60,
              difficulty: "hard",
              dependencies: ["task-3-1-3"],
              revisionWeight: 0.8,
              status: "scheduled",
              scheduleReason: "Dependency ordering - used in compilers, builds",
            },
            {
              id: "task-3-1-5",
              name: "Shortest Path Algorithms",
              estimatedMinutes: 90,
              difficulty: "hard",
              dependencies: ["task-3-1-4"],
              revisionWeight: 0.7,
              status: "scheduled",
              scheduleReason: "Dijkstra, Bellman-Ford for weighted graphs",
            },
            {
              id: "task-3-1-6",
              name: "Practice: Graph Problems",
              estimatedMinutes: 135,
              difficulty: "hard",
              dependencies: ["task-3-1-5"],
              revisionWeight: 0.5,
              status: "scheduled",
              scheduleReason: "Graphs are complex - extra practice needed",
            },
          ],
        },
        {
          id: "topic-3-2",
          name: "Dynamic Programming",
          estimatedMinutes: 480,
          tasks: [
            {
              id: "task-3-2-1",
              name: "DP Fundamentals",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-3-1-6"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "Overlapping subproblems, optimal substructure",
            },
            {
              id: "task-3-2-2",
              name: "1D DP Patterns",
              estimatedMinutes: 90,
              difficulty: "medium",
              dependencies: ["task-3-2-1"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "Fibonacci, climbing stairs, house robber",
            },
            {
              id: "task-3-2-3",
              name: "2D DP Patterns",
              estimatedMinutes: 90,
              difficulty: "hard",
              dependencies: ["task-3-2-2"],
              revisionWeight: 0.9,
              status: "scheduled",
              scheduleReason: "Grid paths, longest common subsequence",
            },
            {
              id: "task-3-2-4",
              name: "DP on Strings",
              estimatedMinutes: 75,
              difficulty: "hard",
              dependencies: ["task-3-2-3"],
              revisionWeight: 0.8,
              status: "scheduled",
              scheduleReason: "Edit distance, palindrome patterns",
            },
            {
              id: "task-3-2-5",
              name: "DP Optimization",
              estimatedMinutes: 60,
              difficulty: "hard",
              dependencies: ["task-3-2-4"],
              revisionWeight: 0.6,
              status: "scheduled",
              scheduleReason: "Space optimization, memoization vs tabulation",
            },
            {
              id: "task-3-2-6",
              name: "Practice: DP Problems",
              estimatedMinutes: 105,
              difficulty: "hard",
              dependencies: ["task-3-2-5"],
              revisionWeight: 0.5,
              status: "scheduled",
              scheduleReason: "DP needs extensive practice - your weak area",
            },
          ],
        },
        {
          id: "topic-3-3",
          name: "Backtracking",
          estimatedMinutes: 240,
          tasks: [
            {
              id: "task-3-3-1",
              name: "Backtracking Template",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-3-2-6"],
              revisionWeight: 0.8,
              status: "scheduled",
              scheduleReason: "One template covers most problems",
            },
            {
              id: "task-3-3-2",
              name: "Permutations & Combinations",
              estimatedMinutes: 75,
              difficulty: "medium",
              dependencies: ["task-3-3-1"],
              revisionWeight: 0.7,
              status: "scheduled",
              scheduleReason: "Classic backtracking applications",
            },
            {
              id: "task-3-3-3",
              name: "Constraint Satisfaction",
              estimatedMinutes: 45,
              difficulty: "hard",
              dependencies: ["task-3-3-2"],
              revisionWeight: 0.6,
              status: "scheduled",
              scheduleReason: "N-Queens, Sudoku solver",
            },
            {
              id: "task-3-3-4",
              name: "Practice: Backtracking Problems",
              estimatedMinutes: 60,
              difficulty: "medium",
              dependencies: ["task-3-3-3"],
              revisionWeight: 0.4,
              status: "scheduled",
              scheduleReason: "Final practice before mock interviews",
            },
          ],
        },
      ],
    },
  ];

  return {
    id: `roadmap-${goalId}`,
    goalId,
    phases,
    totalEstimatedMinutes: phases.reduce((sum, p) => sum + p.estimatedMinutes, 0),
    bufferDays: 4,
    revisionSlots: 8,
    generatedAt: new Date().toISOString(),
  };
}
